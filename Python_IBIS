# Si besoin, installe ipywidgets (souvent déjà installé dans Carnets)
# !pip install ipywidgets

from ipywidgets import interact_manual, IntText, Output, VBox
from IPython.display import display, clear_output

duree_chambre = 0.5
max_chambres_femme = 14

output = Output()

def calcul_repartition(nb_chambres, nb_femmes, nb_interim):
    with output:
        clear_output()
        if nb_femmes == 0:
            print("Il faut au moins une femme de ménage !")
            return
        if nb_interim == 0:
            nb_interim = 1  # éviter division par 0

        total_femmes = nb_femmes * max_chambres_femme
        resultat = ""

        if total_femmes >= nb_chambres:
            chambres_par_femme = nb_chambres // nb_femmes
            reste = nb_chambres % nb_femmes
            for i in range(nb_femmes):
                nb = chambres_par_femme + (1 if i < reste else 0)
                resultat += f"Femme {i+1}: {nb} chambres ({nb * duree_chambre:.1f} h)\n"
            resultat += "\nAucun intérimaire nécessaire."
        else:
            reste = nb_chambres - total_femmes
            chambres_par_interim = reste / nb_interim
            for i in range(nb_femmes):
                resultat += f"Femme {i+1}: {max_chambres_femme} chambres (7.0 h)\n"
            resultat += "\nIntérimaires:\n"
            for i in range(nb_interim):
                resultat += f"Intérimaire {i+1}: {chambres_par_interim:.1f} chambres ({chambres_par_interim * duree_chambre:.1f} h)\n"

        print(resultat)

# Création des widgets
nb_chambres_widget = IntText(value=50, description='Chambres :')
nb_femmes_widget = IntText(value=5, description='Femmes :')
nb_interim_widget = IntText(value=2, description='Intérim :')

def on_button_clicked(*args):
    calcul_repartition(nb_chambres_widget.value, nb_femmes_widget.value, nb_interim_widget.value)

# Widget interactif avec bouton "Calculer"
interact_manual(on_button_clicked,
                nb_chambres=nb_chambres_widget,
                nb_femmes=nb_femmes_widget,
                nb_interim=nb_interim_widget)

display(output)
